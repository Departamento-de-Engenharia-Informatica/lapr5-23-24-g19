<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="902px" preserveAspectRatio="none" style="width:989px;height:902px;background:#FFFFFF;" version="1.1" viewBox="0 0 989 902" width="989px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="891.4346" style="stroke:#000000;stroke-width:1.5;" width="983" x="0" y="5"/><path d="M31,5 L31,15.6094 L21,25.6094 L0,25.6094 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="3" y="20.5332">MD</text><rect fill="#ADD8E6" height="846.4688" style="stroke:#181818;stroke-width:0.5;" width="705" x="181" y="33.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59" x="504" y="47.1045">Back-End</text><rect fill="#DDDDDD" height="846.4688" style="stroke:#181818;stroke-width:0.5;" width="82" x="888" y="33.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59" x="899.5" y="47.1045">Database</text><rect fill="#FFFFFF" height="638.5469" style="stroke:#181818;stroke-width:1.0;" width="10" x="206" y="149.9219"/><rect fill="#FFFFFF" height="577.8438" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="180.2734"/><rect fill="#FFFFFF" height="517.1406" style="stroke:#181818;stroke-width:1.0;" width="10" x="524" y="210.625"/><rect fill="#FFFFFF" height="90.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="698" y="606.8438"/><rect fill="#FFFFFF" height="50.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="855" y="647.1953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="924" y="240.9766"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="924" y="417.6016"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="924" y="493.7891"/><rect fill="none" height="480.2734" style="stroke:#000000;stroke-width:1.5;" width="968" x="8" y="316.1953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="211" x2="211" y1="117.5703" y2="813.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="382" x2="382" y1="117.5703" y2="813.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="528.5" x2="528.5" y1="117.5703" y2="813.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="602.5" x2="602.5" y1="289.0859" y2="813.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="703" x2="703" y1="117.5703" y2="813.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="860" x2="860" y1="654.9531" y2="813.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="929" x2="929" y1="117.5703" y2="813.4688"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="185" y="84.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="192" y="106.4941">Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="185" y="812.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="192" y="834.002">Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="344" y="84.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="351" y="106.4941">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="344" y="812.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="351" y="834.002">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="498.5" y="84.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="505.5" y="106.4941">Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="498.5" y="812.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="505.5" y="834.002">Service</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="569.5" y="812.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="576.5" y="834.002">building:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="578" y="851.6113">Building</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="62" x="672" y="84.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="679" y="106.4941">Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="62" x="672" y="812.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="679" y="834.002">Mapper</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="838" y="812.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="848" y="834.002">dto:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="845" y="851.6113">DTO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="892" y="114.4941">Repository</text><path d="M911,63.9609 C911,53.9609 929,53.9609 929,53.9609 C929,53.9609 947,53.9609 947,63.9609 L947,89.9609 C947,99.9609 929,99.9609 929,99.9609 C929,99.9609 911,99.9609 911,89.9609 L911,63.9609 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M911,63.9609 C911,73.9609 929,73.9609 929,73.9609 C929,73.9609 947,73.9609 947,63.9609 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="892" y="827.002">Repository</text><path d="M911,840.0781 C911,830.0781 929,830.0781 929,830.0781 C929,830.0781 947,830.0781 947,840.0781 L947,866.0781 C947,876.0781 929,876.0781 929,876.0781 C929,876.0781 911,876.0781 911,866.0781 L911,840.0781 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M911,840.0781 C911,850.0781 929,850.0781 929,850.0781 C929,850.0781 947,850.0781 947,840.0781 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="638.5469" style="stroke:#181818;stroke-width:1.0;" width="10" x="206" y="149.9219"/><rect fill="#FFFFFF" height="577.8438" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="180.2734"/><rect fill="#FFFFFF" height="517.1406" style="stroke:#181818;stroke-width:1.0;" width="10" x="524" y="210.625"/><rect fill="#FFFFFF" height="90.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="698" y="606.8438"/><rect fill="#FFFFFF" height="50.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="855" y="647.1953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="924" y="240.9766"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="924" y="417.6016"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="924" y="493.7891"/><polygon fill="#181818" points="194,145.9219,204,149.9219,194,153.9219,198,149.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="5" x2="200" y1="149.9219" y2="149.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="12" y="145.0654">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="23" y="145.0654">patch /building/{id}</text><polygon fill="#181818" points="365,176.2734,375,180.2734,365,184.2734,369,180.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="216" x2="371" y1="180.2734" y2="180.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="223" y="175.417">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="234" y="175.417">editBuilding(req,res,...)</text><polygon fill="#181818" points="512,206.625,522,210.625,512,214.625,516,210.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="387" x2="518" y1="210.625" y2="210.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="394" y="205.7686">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="405" y="205.7686">editBuilding(id,dto)</text><polygon fill="#181818" points="912,236.9766,922,240.9766,912,244.9766,916,240.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="534" x2="918" y1="240.9766" y2="240.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="541" y="236.1201">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="552" y="236.1201">findByCode(building)</text><polygon fill="#181818" points="647.5,267.3281,637.5,271.3281,647.5,275.3281,643.5,271.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641.5" x2="928" y1="271.3281" y2="271.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="653.5" y="266.4717">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="664.5" y="266.4717">create()</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="569.5" y="248.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="576.5" y="270.5098">building:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="578" y="288.1191">Building</text><path d="M8,316.1953 L69,316.1953 L69,324.5469 L59,334.5469 L8,334.5469 L8,316.1953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="480.2734" style="stroke:#000000;stroke-width:1.5;" width="968" x="8" y="316.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="23" y="330.6904">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="108" x="84" y="329.6143">[building not found]</text><polygon fill="#181818" points="398,352.8984,388,356.8984,398,360.8984,394,356.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="392" x2="523" y1="356.8984" y2="356.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="404" y="352.042">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="415" y="352.042">error</text><polygon fill="#181818" points="227,383.25,217,387.25,227,391.25,223,387.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="221" x2="376" y1="387.25" y2="387.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="233" y="382.3936">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="244" y="382.3936">response 422</text><polygon fill="#181818" points="16,413.6016,6,417.6016,16,421.6016,12,417.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="205" y1="417.6016" y2="417.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="22" y="412.7451">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="33" y="412.7451">422: Unprocessable Content</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="8" x2="976" y1="456.6016" y2="456.6016"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89" x="13" y="468.0205">[building exists]</text><polygon fill="#181818" points="912,489.7891,922,493.7891,912,497.7891,916,493.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="534" x2="918" y1="493.7891" y2="493.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="541" y="488.9326">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="552" y="488.9326">save(building)</text><path d="M539,536.7891 L539,578.7891 L712,578.7891 L712,546.7891 L702,536.7891 L539,536.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M702,536.7891 L702,546.7891 L712,546.7891 L702,536.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="545" y="555.2842">edit building specifications</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="545" y="571.6357">based on new ones</text><polygon fill="#181818" points="686,602.8438,696,606.8438,686,610.8438,690,606.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="534" x2="692" y1="606.8438" y2="606.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="541" y="601.9873">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="559" y="601.9873">domain2DTO(building)</text><polygon fill="#181818" points="826,633.1953,836,637.1953,826,641.1953,830,637.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="708" x2="832" y1="637.1953" y2="637.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="715" y="632.3389">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="733" y="632.3389">create(building)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="838" y="614.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="848" y="636.377">dto:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="845" y="653.9863">DTO</text><polygon fill="#181818" points="545,693.4141,535,697.4141,545,701.4141,541,697.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="539" x2="702" y1="697.4141" y2="697.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="551" y="692.5576">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="569" y="692.5576">dto</text><polygon fill="#181818" points="398,723.7656,388,727.7656,398,731.7656,394,727.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="392" x2="528" y1="727.7656" y2="727.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="404" y="722.9092">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="422" y="722.9092">dto</text><polygon fill="#181818" points="227,754.1172,217,758.1172,227,762.1172,223,758.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="221" x2="381" y1="758.1172" y2="758.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="233" y="753.2607">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="251" y="753.2607">201</text><polygon fill="#181818" points="16,784.4688,6,788.4688,16,792.4688,12,788.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="210" y1="788.4688" y2="788.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="22" y="783.6123">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="40" y="783.6123">Created</text><!--MD5=[52d035b5f309339dcce0f42de5501a8b]
@startuml
autonumber

mainframe MD
box "Back-End" #LightBlue

participant "Route" as r
participant "Controller" as ctrl
participant "Service" as svc

participant "building:\nBuilding" as b
participant "Mapper" as map
participant "dto:\nDTO" as dto
end box
box "Database"
database "Repository" as repo
end box

'activate [
[-> r: patch /building/{id}

    activate r
        r -> ctrl : editBuilding(req,res,...)
            activate ctrl
                ctrl -> svc : editBuilding(id,dto)
                activate svc
                    svc -> repo : findByCode(building)
                    activate repo
                    repo - -> b **: create()
                    deactivate repo
                    alt building not found
                        svc - -> ctrl : error
                        deactivate b
                        ctrl - -> r : response 422
                        [<- -r : 422: Unprocessable Content
                    else building exists

                    activate repo
                    deactivate repo

                    activate b

                    svc -> repo : save(building)
                    activate repo
                    deactivate repo
                    note right of svc
                        edit building specifications
                        based on new ones
                    end note

                    svc -> map : domain2DTO(building)
                    activate map
                        map - -> dto **: create(building)
                        activate dto

                        map - -> svc : dto
                        deactivate dto
                    deactivate map

                    svc - -> ctrl : dto
                deactivate svc

                ctrl - -> r : 201
            deactivate ctrl




    [<- -r: Created
deactivate r
    end
'deactivate [

@enduml

@startuml
autonumber

mainframe MD
box "Back-End" #LightBlue

participant "Route" as r
participant "Controller" as ctrl
participant "Service" as svc

participant "building:\nBuilding" as b
participant "Mapper" as map
participant "dto:\nDTO" as dto
end box
box "Database"
database "Repository" as repo
end box

[-> r: patch /building/{id}

    activate r
        r -> ctrl : editBuilding(req,res,...)
            activate ctrl
                ctrl -> svc : editBuilding(id,dto)
                activate svc
                    svc -> repo : findByCode(building)
                    activate repo
                    repo - -> b **: create()
                    deactivate repo
                    alt building not found
                        svc - -> ctrl : error
                        deactivate b
                        ctrl - -> r : response 422
                        [<- -r : 422: Unprocessable Content
                    else building exists

                    activate repo
                    deactivate repo

                    activate b

                    svc -> repo : save(building)
                    activate repo
                    deactivate repo
                    note right of svc
                        edit building specifications
                        based on new ones
                    end note

                    svc -> map : domain2DTO(building)
                    activate map
                        map - -> dto **: create(building)
                        activate dto

                        map - -> svc : dto
                        deactivate dto
                    deactivate map

                    svc - -> ctrl : dto
                deactivate svc

                ctrl - -> r : 201
            deactivate ctrl




    [<- -r: Created
deactivate r
    end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: pt
Country: PT
--></g></svg>