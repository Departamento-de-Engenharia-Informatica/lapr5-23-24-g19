@startuml
autonumber

actor "Administrator" as usr

participant "View" as view
participant ":Controller" as ctrl

participant "dto:BackofficeUserDTO" as c_dto
participant "createdDto:CreatedBackofficeUserDTO" as b_dto

' TODO: separate service into backoffice and client dedicated ones
participant ":UserService" as svc


participant "HTTP Driver" as http

activate usr
    usr -> view : wants to create a backoffice user
    activate view
        view --> usr : request data
    deactivate view

    usr -> view : provides data
    activate view
        view -> ctrl : submit()
        activate ctrl
            ctrl --> c_dto** : create()

            ctrl -> svc : createUser(dto)
            activate svc
                svc -> http : post(API_URL/users-backoffice, dto)
                activate http

                    http ->] : POST /users-backoffice
                    http <--] : user
                    http --> svc : user
                deactivate http

                svc --> b_dto** : create()
                svc --> ctrl : createdDto
            deactivate svc
alt user not created

            ctrl --> view : error
            view --> usr : inform error
else success
            ctrl --> view : user
        deactivate ctrl

        view --> usr : shows created user
    deactivate view
end

deactivate usr
@enduml
