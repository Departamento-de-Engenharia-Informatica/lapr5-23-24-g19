<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="761px" preserveAspectRatio="none" style="width:823px;height:761px;background:#FFFFFF;" version="1.1" viewBox="0 0 823 761" width="823px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="750.5127" style="stroke:#000000;stroke-width:1.5;" width="817" x="0" y="5"/><path d="M31,5 L31,15.6094 L21,25.6094 L0,25.6094 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="3" y="20.5332">MD</text><rect fill="#ADD8E6" height="705.5469" style="stroke:#181818;stroke-width:0.5;" width="593" x="134" y="33.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59" x="401" y="47.1045">Back-End</text><rect fill="#DDDDDD" height="705.5469" style="stroke:#181818;stroke-width:0.5;" width="82" x="729" y="33.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59" x="740.5" y="47.1045">Database</text><rect fill="#FFFFFF" height="512.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="159" y="149.9219"/><rect fill="#FFFFFF" height="482.2734" style="stroke:#181818;stroke-width:1.0;" width="10" x="318" y="180.2734"/><rect fill="#FFFFFF" height="451.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="437" y="210.625"/><rect fill="#FFFFFF" height="90.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="566" y="458.9219"/><rect fill="#FFFFFF" height="50.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="696" y="499.2734"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="765" y="240.9766"/><rect fill="#FFFFFF" height="71.5391" style="stroke:#181818;stroke-width:1.0;" width="10" x="765" y="387.3828"/><rect fill="none" height="369.5703" style="stroke:#000000;stroke-width:1.5;" width="735" x="8" y="285.9766"/><rect fill="none" height="139.2734" style="stroke:#000000;stroke-width:1.5;" width="331.5" x="401.5" y="418.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="164" x2="164" y1="117.5703" y2="672.5469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="323" x2="323" y1="117.5703" y2="672.5469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="441.5" x2="441.5" y1="117.5703" y2="672.5469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="505.5" x2="505.5" y1="117.5703" y2="672.5469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="571" x2="571" y1="117.5703" y2="672.5469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="701" x2="701" y1="507.0313" y2="672.5469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="770" x2="770" y1="117.5703" y2="672.5469"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="138" y="84.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="145" y="106.4941">Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="138" y="671.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="145" y="693.0801">Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="285" y="84.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="292" y="106.4941">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="285" y="671.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="292" y="693.0801">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="411.5" y="84.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="418.5" y="106.4941">Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="411.5" y="671.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="418.5" y="693.0801">Service</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="482.5" y="67.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="490" y="88.8848">floor:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="489.5" y="106.4941">Floor</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="482.5" y="671.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="490" y="693.0801">floor:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="489.5" y="710.6895">Floor</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="62" x="540" y="84.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="547" y="106.4941">Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="62" x="540" y="671.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="547" y="693.0801">Mapper</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="679" y="671.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="689" y="693.0801">dto:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="686" y="710.6895">DTO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="733" y="114.4941">Repository</text><path d="M752,63.9609 C752,53.9609 770,53.9609 770,53.9609 C770,53.9609 788,53.9609 788,63.9609 L788,89.9609 C788,99.9609 770,99.9609 770,99.9609 C770,99.9609 752,99.9609 752,89.9609 L752,63.9609 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M752,63.9609 C752,73.9609 770,73.9609 770,73.9609 C770,73.9609 788,73.9609 788,63.9609 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="733" y="686.0801">Repository</text><path d="M752,699.1563 C752,689.1563 770,689.1563 770,689.1563 C770,689.1563 788,689.1563 788,699.1563 L788,725.1563 C788,735.1563 770,735.1563 770,735.1563 C770,735.1563 752,735.1563 752,725.1563 L752,699.1563 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M752,699.1563 C752,709.1563 770,709.1563 770,709.1563 C770,709.1563 788,709.1563 788,699.1563 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="512.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="159" y="149.9219"/><rect fill="#FFFFFF" height="482.2734" style="stroke:#181818;stroke-width:1.0;" width="10" x="318" y="180.2734"/><rect fill="#FFFFFF" height="451.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="437" y="210.625"/><rect fill="#FFFFFF" height="90.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="566" y="458.9219"/><rect fill="#FFFFFF" height="50.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="696" y="499.2734"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="765" y="240.9766"/><rect fill="#FFFFFF" height="71.5391" style="stroke:#181818;stroke-width:1.0;" width="10" x="765" y="387.3828"/><polygon fill="#181818" points="147,145.9219,157,149.9219,147,153.9219,151,149.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="153" y1="149.9219" y2="149.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="12" y="145.0654">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="23" y="145.0654">GET /building/{id}</text><polygon fill="#181818" points="306,176.2734,316,180.2734,306,184.2734,310,180.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="169" x2="312" y1="180.2734" y2="180.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="176" y="175.417">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="187" y="175.417">getBuildings(req,res)</text><polygon fill="#181818" points="425,206.625,435,210.625,425,214.625,429,210.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="328" x2="431" y1="210.625" y2="210.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="335" y="205.7686">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="346" y="205.7686">getBuildings()</text><polygon fill="#181818" points="753,236.9766,763,240.9766,753,244.9766,757,240.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="447" x2="759" y1="240.9766" y2="240.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="454" y="236.1201">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="465" y="236.1201">findAll()</text><path d="M8,285.9766 L69,285.9766 L69,294.3281 L59,304.3281 L8,304.3281 L8,285.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="369.5703" style="stroke:#000000;stroke-width:1.5;" width="735" x="8" y="285.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="23" y="300.4717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="108" x="84" y="299.3955">[building not found]</text><polygon fill="#181818" points="339,322.6797,329,326.6797,339,330.6797,335,326.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="333" x2="436" y1="326.6797" y2="326.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="345" y="321.8232">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="356" y="321.8232">error</text><polygon fill="#181818" points="180,353.0313,170,357.0313,180,361.0313,176,357.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="174" x2="317" y1="357.0313" y2="357.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="186" y="352.1748">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="197" y="352.1748">error (412)</text><polygon fill="#181818" points="16,383.3828,6,387.3828,16,391.3828,12,387.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="158" y1="387.3828" y2="387.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="22" y="382.5264">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="33" y="382.5264">response code 422</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="8" x2="743" y1="396.3828" y2="396.3828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="152" x="13" y="407.8018">[floor created successfully]</text><path d="M401.5,418.2188 L474.5,418.2188 L474.5,426.5703 L464.5,436.5703 L401.5,436.5703 L401.5,418.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="139.2734" style="stroke:#000000;stroke-width:1.5;" width="331.5" x="401.5" y="418.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="416.5" y="432.7139">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="100" x="489.5" y="431.6377">[for each building]</text><polygon fill="#181818" points="554,454.9219,564,458.9219,554,462.9219,558,458.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="447" x2="560" y1="458.9219" y2="458.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="454" y="454.0654">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="465" y="454.0654">toDTO(building)</text><polygon fill="#181818" points="667,485.2734,677,489.2734,667,493.2734,671,489.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="576" x2="673" y1="489.2734" y2="489.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="583" y="484.417">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="594" y="484.417">create(floor)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44" x="679" y="466.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="689" y="488.4551">dto:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="686" y="506.0645">DTO</text><polygon fill="#181818" points="458,545.4922,448,549.4922,458,553.4922,454,549.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="452" x2="570" y1="549.4922" y2="549.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="464" y="544.6357">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="482" y="544.6357">dto</text><polygon fill="#181818" points="339,582.8438,329,586.8438,339,590.8438,335,586.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="333" x2="436" y1="586.8438" y2="586.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="345" y="581.9873">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="363" y="581.9873">dto</text><polygon fill="#181818" points="180,613.1953,170,617.1953,180,621.1953,176,617.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="174" x2="317" y1="617.1953" y2="617.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="186" y="612.3389">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="204" y="612.3389">response</text><polygon fill="#181818" points="16,643.5469,6,647.5469,16,651.5469,12,647.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="158" y1="647.5469" y2="647.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="22" y="642.6904">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="40" y="642.6904">response code 200</text><!--MD5=[e2235a66bacb810f28b0104950f1cdfa]
@startuml
autonumber

mainframe MD
box "Back-End" #LightBlue
participant "Route" as r
participant "Controller" as ctrl
participant "Service" as svc

participant "floor:\nFloor" as floor
participant "Mapper" as map
participant "dto:\nDTO" as dto
end box

box "Database"
database "Repository" as repo
end box

[- -> r: GET /building/{id}
    activate r
        r -> ctrl : getBuildings(req,res)
        activate ctrl
            ctrl -> svc : getBuildings()
            activate svc
                svc -> repo : findAll()
                activate repo
                deactivate repo

                alt building not found
                    svc - -> ctrl : error
                    ctrl - -> r : error (412)
                    [<- -r : response code 422
                else floor created successfully

                loop for each building
                    activate repo
                        svc -> map : toDTO(building)
                    deactivate repo

                    activate map
                        map - -> dto** : create(floor)
                        activate dto
                            map - -> svc : dto
                        deactivate dto
                    deactivate map
                end loop
                    svc - -> ctrl : dto
                    ctrl - -> r : response
                    [<- - r : response code 200
                end
            deactivate svc
        deactivate ctrl
    deactivate r

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: pt
Country: PT
--></g></svg>